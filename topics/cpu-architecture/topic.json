{
  "id": "cpu-architecture",
  "title": "CPU Architecture",
  "description": "Von Neumann fetch-execute cycle visualization",
  "slides": [
    {
      "id": "fetch-execute",
      "title": "The Fetch-Execute Cycle",
      "diagram": "diagram.svg",
      "components": {
        "val_pc": "0x1A",
        "val_ir": "--",
        "val_cu": "IDLE",
        "val_alu": "WAIT",
        "val_acc": "05",
        "val_ram": "Addr 0x1A"
      },
      "steps": [
        {
          "id": "intro",
          "ui": {
            "phase": "SYSTEM READY",
            "title": "Introduction",
            "description": "Welcome! This simulation shows how a <span class='hl'>CPU (Central Processing Unit)</span> - the \"brain\" of your computer - executes instructions.<br><br>We'll follow one complete <strong>Instruction Cycle</strong> step-by-step.<br><br>Press <strong>NEXT STEP</strong> to begin.",
            "noteTitle": "Components Overview",
            "note": "<strong>RAM</strong> = Memory that stores instructions and data<br><strong>PC</strong> = Program Counter (tracks current instruction)<br><strong>IR</strong> = Instruction Register (holds current instruction)<br><strong>CU</strong> = Control Unit (directs operations)<br><strong>ALU</strong> = Arithmetic Logic Unit (does math)<br><strong>ACC</strong> = Accumulator (stores results)"
          },
          "animations": []
        },
        {
          "id": "fetch-address",
          "ui": {
            "phase": "PHASE 1: FETCH",
            "phaseExplanation": "The CPU retrieves the next instruction from memory. Like reading the next line in a recipe book.",
            "title": "Address Request",
            "description": "The <span class='hl'>PC (Program Counter)</span> sends address <code>0x1A</code> to RAM.<br><br><em>Address 0x1A is a memory location written in hexadecimal (base-16) notation.</em>",
            "noteTitle": "What is the Program Counter?",
            "note": "The PC keeps track of which instruction to execute next. Think of it as your finger pointing to the current line in a recipe. After each instruction, it automatically moves to the next one."
          },
          "initialState": {
            "val_ram": "Addr 0x1A"
          },
          "finalState": {
            "val_ram": "INC ACC"
          },
          "animations": [
            { "type": "camera", "to": [150, 200, 800, 450] },
            {
              "type": "packet",
              "text": "ADDR 0x1A",
              "from": [700, 300],
              "paths": [
                "#path_pc_out",
                { "path": "#wire_bus_main", "start": 0.71, "end": 0.24, "duration": 2.0 },
                "#path_ram_in"
              ]
            },
            { "type": "pulse", "target": "#node_ram" },
            { "type": "setValue", "target": "val_ram", "value": "READING..." },
            { "type": "wait", "duration": 0.5 },
            { "type": "setValue", "target": "val_ram", "value": "INC ACC" },
            { "type": "camera", "to": [0, 0, 1600, 900] }
          ]
        },
        {
          "id": "fetch-data",
          "ui": {
            "phase": "PHASE 1: FETCH",
            "phaseExplanation": "The CPU retrieves the next instruction from memory. Like reading the next line in a recipe book.",
            "title": "Instruction Return",
            "description": "RAM finds instruction <span class='hl'>INC ACC</span> at address 0x1A and sends it to the <span class='hl'>IR (Instruction Register)</span>.<br><br><em>INC ACC means \"increment the accumulator\" - add 1 to the stored value.</em>",
            "noteTitle": "What is the Instruction Register?",
            "note": "The IR temporarily holds the current instruction being executed. It's like a sticky note where you write down the current recipe step so you don't forget it while working."
          },
          "initialState": {
            "val_ram": "INC ACC",
            "val_ir": "--"
          },
          "finalState": {
            "val_ir": "INC ACC"
          },
          "animations": [
            { "type": "camera", "to": [150, 200, 800, 450] },
            {
              "type": "packet",
              "text": "INC ACC",
              "from": [300, 350],
              "paths": [
                "#path_ram_out",
                { "path": "#wire_bus_main", "start": 0.24, "end": 0.88, "duration": 2.0 },
                "#path_ir_in"
              ]
            },
            { "type": "pulse", "target": "#node_ir" },
            { "type": "setValue", "target": "val_ir", "value": "INC ACC" },
            { "type": "camera", "to": [0, 0, 1600, 900] }
          ]
        },
        {
          "id": "decode",
          "ui": {
            "phase": "PHASE 2: DECODE",
            "phaseExplanation": "The CPU interprets the instruction to understand what operation to perform. Like translating a recipe step into actions.",
            "title": "Control Unit Decodes",
            "description": "The <span class='hl'>CU (Control Unit)</span> reads 'INC ACC' and figures out what to do: it needs to tell the ALU to <b>ADD 1</b> to the current value.",
            "noteTitle": "What is the Control Unit?",
            "note": "The CU is the \"manager\" of the CPU. It reads instructions and sends signals to other components telling them what to do. It doesn't do calculations itself - it just coordinates everything."
          },
          "initialState": {
            "val_cu": "IDLE"
          },
          "finalState": {
            "val_cu": "ADD 1"
          },
          "animations": [
            { "type": "camera", "to": [600, 300, 800, 450] },
            {
              "type": "packet",
              "text": "INC ACC",
              "from": [850, 450],
              "paths": [
                { "path": "#path_ir_cu", "duration": 1.5, "ease": "power1.inOut" }
              ]
            },
            { "type": "pulse", "target": "#node_cu" },
            { "type": "setValue", "target": "val_cu", "value": "ADD 1" },
            { "type": "camera", "to": [0, 0, 1600, 900] }
          ]
        },
        {
          "id": "execute",
          "ui": {
            "phase": "PHASE 3: EXECUTE",
            "phaseExplanation": "The CPU performs the actual operation - calculations, comparisons, or data movement. This is where the real work happens!",
            "title": "ALU Calculates",
            "description": "The <span class='hl'>ALU (Arithmetic Logic Unit)</span> receives two inputs:<br>• The current value <b>5</b> from the Accumulator<br>• The operation <b>+1</b> from the Control Unit<br><br>Result: 5 + 1 = <b>6</b>",
            "noteTitle": "What is the ALU?",
            "note": "The ALU is the calculator of the CPU. It can do arithmetic (add, subtract, multiply) and logic operations (AND, OR, compare). All the actual \"computing\" happens here!"
          },
          "initialState": {
            "val_alu": "WAIT"
          },
          "finalState": {
            "val_alu": "6"
          },
          "animations": [
            { "type": "camera", "to": [700, 300, 800, 450] },
            {
              "type": "packet",
              "text": "VAL: 5",
              "from": [1300, 550],
              "paths": [
                { "path": "#path_acc_alu", "duration": 1.5 }
              ]
            },
            {
              "type": "packet",
              "text": "OP: +1",
              "from": [850, 650],
              "paths": [
                { "path": "#path_cu_alu", "duration": 2.0 }
              ]
            },
            { "type": "pulse", "target": "#node_alu" },
            { "type": "setValue", "target": "val_alu", "value": "6" },
            { "type": "camera", "to": [0, 0, 1600, 900] }
          ]
        },
        {
          "id": "store",
          "ui": {
            "phase": "PHASE 4: STORE",
            "phaseExplanation": "The CPU saves the result back to a register or memory. The final step that preserves the work done.",
            "title": "Store in Accumulator",
            "description": "The result <b>6</b> is stored in the <span class='hl'>ACC (Accumulator)</span>.<br><br>The old value (5) is overwritten with the new value (6).",
            "noteTitle": "What is the Accumulator?",
            "note": "The ACC is a special register that stores the result of calculations. It's called \"accumulator\" because results accumulate (build up) there. Think of it as the calculator's display showing the current answer."
          },
          "initialState": {
            "val_acc": "05"
          },
          "finalState": {
            "val_acc": "06"
          },
          "animations": [
            { "type": "camera", "to": [900, 300, 600, 337] },
            {
              "type": "packet",
              "text": "RESULT: 6",
              "from": [1225, 350],
              "paths": [
                { "path": "#path_alu_acc", "duration": 2.0 }
              ]
            },
            { "type": "pulse", "target": "#node_acc" },
            { "type": "setValue", "target": "val_acc", "value": "06" },
            { "type": "camera", "to": [0, 0, 1600, 900] }
          ]
        },
        {
          "id": "complete",
          "ui": {
            "phase": "CYCLE COMPLETE",
            "title": "Ready for Next Instruction",
            "description": "The instruction is complete! The <span class='hl'>PC</span> automatically increments to <code>0x1B</code> (the next address), and the whole cycle starts over.<br><br>We just executed: <b>INC ACC</b> (5 → 6)",
            "noteTitle": "The Never-Ending Cycle",
            "note": "This Fetch → Decode → Execute → Store cycle repeats <em>billions</em> of times per second in modern CPUs. A 3 GHz processor does this 3,000,000,000 times every second!"
          },
          "initialState": {},
          "finalState": {
            "val_pc": "0x1B",
            "val_cu": "IDLE",
            "val_alu": "WAIT"
          },
          "animations": [
            { "type": "setValue", "target": "val_pc", "value": "0x1B" },
            { "type": "setValue", "target": "val_cu", "value": "IDLE" },
            { "type": "setValue", "target": "val_alu", "value": "WAIT" }
          ]
        }
      ]
    }
  ]
}
