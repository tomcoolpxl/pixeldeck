<svg id="main-svg" viewBox="0 0 1600 900" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg">
    <defs>
        <filter id="glow-blue"><feGaussianBlur stdDeviation="4" result="coloredBlur"/><feMerge><feMergeNode in="coloredBlur"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
        <filter id="glow-pink"><feGaussianBlur stdDeviation="4" result="coloredBlur"/><feMerge><feMergeNode in="coloredBlur"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
        <filter id="glow-yellow"><feGaussianBlur stdDeviation="4" result="coloredBlur"/><feMerge><feMergeNode in="coloredBlur"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
        <filter id="glow-green"><feGaussianBlur stdDeviation="4" result="coloredBlur"/><feMerge><feMergeNode in="coloredBlur"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
    </defs>

    <!-- Phase Indicator Box -->
    <g id="phase-indicator" transform="translate(20, 0)">
        <rect class="phase-box-bg" x="0" y="0" width="185" height="220" rx="10" fill="#0f172a" stroke="#1e293b" stroke-width="2"/>
        <text x="92" y="30" font-family="sans-serif" font-size="14" font-weight="bold" fill="#64748b" text-anchor="middle">INSTRUCTION CYCLE</text>
        <line x1="15" y1="45" x2="170" y2="45" stroke="#1e293b" stroke-width="1"/>

        <!-- Phase 1: FETCH (faded blue) -->
        <g id="phase-ind-fetch" class="phase-item">
            <rect id="phase-bg-fetch" x="10" y="55" width="165" height="35" rx="6" fill="transparent" stroke="transparent" stroke-width="2"/>
            <text id="phase-text-fetch" x="92" y="78" font-family="sans-serif" font-size="14" font-weight="bold" fill="#1e5a7e" text-anchor="middle">1. FETCH</text>
        </g>

        <!-- Phase 2: DECODE (faded yellow) -->
        <g id="phase-ind-decode" class="phase-item">
            <rect id="phase-bg-decode" x="10" y="95" width="165" height="35" rx="6" fill="transparent" stroke="transparent" stroke-width="2"/>
            <text id="phase-text-decode" x="92" y="118" font-family="sans-serif" font-size="14" font-weight="bold" fill="#6b5a1f" text-anchor="middle">2. DECODE</text>
        </g>

        <!-- Phase 3: EXECUTE (faded pink) -->
        <g id="phase-ind-execute" class="phase-item">
            <rect id="phase-bg-execute" x="10" y="135" width="165" height="35" rx="6" fill="transparent" stroke="transparent" stroke-width="2"/>
            <text id="phase-text-execute" x="92" y="158" font-family="sans-serif" font-size="14" font-weight="bold" fill="#6b3a4a" text-anchor="middle">3. EXECUTE</text>
        </g>

        <!-- Phase 4: STORE (faded green) -->
        <g id="phase-ind-store" class="phase-item">
            <rect id="phase-bg-store" x="10" y="175" width="165" height="35" rx="6" fill="transparent" stroke="transparent" stroke-width="2"/>
            <text id="phase-text-store" x="92" y="198" font-family="sans-serif" font-size="14" font-weight="bold" fill="#2a5a3a" text-anchor="middle">4. STORE</text>
        </g>
    </g>

    <!-- Wires (vertical connections) -->
    <path id="path_ram_out" class="wire" d="M 300 350 L 300 250" />
    <path id="path_ram_in" class="wire" d="M 300 250 L 300 350" />
    <path id="path_pc_out" class="wire" d="M 700 350 L 700 250" />
    <path id="path_ir_in" class="wire" d="M 850 250 L 850 350" />
    <path id="path_ir_cu" class="wire" d="M 850 450 L 850 550" />
    <path id="path_cu_alu" class="wire" d="M 850 650 L 850 700 L 1150 700 L 1150 450" />
    <path id="path_acc_alu" class="wire" d="M 1300 550 L 1300 450" />
    <path id="path_alu_acc" class="wire" d="M 1225 350 L 1225 300 L 1450 300 L 1450 600 L 1400 600" />

    <!-- RAM -->
    <g id="node_ram" transform="translate(200, 350)">
        <rect class="comp-bg type-blue" width="200" height="400" rx="10" filter="url(#glow-blue)"/>
        <text class="comp-label text-blue" x="100" y="35">RAM</text>

        <!-- Memory addresses list -->
        <text x="30" y="70" font-family="monospace" font-size="13" fill="#64748b">ADDR</text>
        <text x="110" y="70" font-family="monospace" font-size="13" fill="#64748b">DATA</text>

        <line x1="20" y1="80" x2="180" y2="80" stroke="#334155" stroke-width="1"/>

        <text x="30" y="105" font-family="monospace" font-size="14" fill="#64748b">0x18</text>
        <text x="110" y="105" font-family="monospace" font-size="14" fill="#64748b">MOV A,B</text>

        <text x="30" y="130" font-family="monospace" font-size="14" fill="#64748b">0x19</text>
        <text x="110" y="130" font-family="monospace" font-size="14" fill="#64748b">ADD #3</text>

        <!-- Highlighted current address -->
        <rect id="ram_highlight" x="15" y="140" width="170" height="28" rx="4" fill="#38bdf820" stroke="#38bdf8" stroke-width="1"/>
        <text x="30" y="160" font-family="monospace" font-size="14" fill="#38bdf8" font-weight="bold">0x1A</text>
        <text id="val_ram" x="110" y="160" font-family="monospace" font-size="14" fill="#38bdf8" font-weight="bold">INC ACC</text>

        <text x="30" y="190" font-family="monospace" font-size="14" fill="#64748b">0x1B</text>
        <text x="110" y="190" font-family="monospace" font-size="14" fill="#64748b">STR A</text>

        <text x="30" y="215" font-family="monospace" font-size="14" fill="#64748b">0x1C</text>
        <text x="110" y="215" font-family="monospace" font-size="14" fill="#64748b">JMP 0x10</text>

        <text x="30" y="240" font-family="monospace" font-size="14" fill="#64748b">0x1D</text>
        <text x="110" y="240" font-family="monospace" font-size="14" fill="#64748b">NOP</text>

        <line x1="20" y1="255" x2="180" y2="255" stroke="#334155" stroke-width="1"/>
        <text x="100" y="280" font-family="monospace" font-size="12" fill="#475569" text-anchor="middle">...</text>
    </g>

    <!-- CPU Boundary -->
    <rect x="600" y="150" width="900" height="700" rx="20" fill="none" stroke="#1e293b" stroke-width="4" stroke-dasharray="20 10" />
    <text x="640" y="200" fill="#334155" font-size="30" font-weight="bold">CPU</text>

    <!-- Program Counter -->
    <g id="node_pc" transform="translate(650, 350)">
        <rect class="comp-bg type-blue" width="100" height="100" rx="8" filter="url(#glow-blue)"/>
        <text class="comp-label text-blue" x="50" y="30">PC</text>
        <text id="val_pc" class="comp-val" x="50" y="70">0x1A</text>
    </g>

    <!-- Instruction Register -->
    <g id="node_ir" transform="translate(800, 350)">
        <rect class="comp-bg type-blue" width="100" height="100" rx="8" filter="url(#glow-blue)"/>
        <text class="comp-label text-blue" x="50" y="30">IR</text>
        <text id="val_ir" class="comp-val" x="50" y="70">--</text>
    </g>

    <!-- Control Unit -->
    <g id="node_cu" transform="translate(750, 550)">
        <rect class="comp-bg type-yellow" width="200" height="100" rx="8" filter="url(#glow-yellow)" />
        <text class="comp-label text-yellow" x="100" y="30">CONTROL</text>
        <text id="val_cu" class="comp-val" x="100" y="70">IDLE</text>
    </g>

    <!-- ALU -->
    <g id="node_alu" transform="translate(1100, 350)">
        <path class="comp-bg type-pink" d="M 20 0 L 230 0 L 200 100 L 50 100 Z" filter="url(#glow-pink)"/>
        <text class="comp-label text-pink" x="125" y="35">ALU</text>
        <text id="val_alu" class="comp-val" x="125" y="75">WAIT</text>
    </g>

    <!-- Accumulator -->
    <g id="node_acc" transform="translate(1250, 550)">
        <rect class="comp-bg type-green" width="150" height="100" rx="8" filter="url(#glow-green)"/>
        <text class="comp-label text-green" x="75" y="30">ACC</text>
        <text id="val_acc" class="comp-val" x="75" y="70">05</text>
    </g>

    <!-- Data Bus (drawn last to overlap other elements) -->
    <path id="wire_bus_main" d="M 100 250 L 950 250" stroke="#38bdf8" stroke-width="5" stroke-linecap="round" fill="none"/>
    <text x="480" y="240" fill="#38bdf8" font-size="14" font-weight="bold" font-family="sans-serif">DATA BUS</text>

    <!-- Data Packet (animated element) -->
    <g id="packet-grp">
        <rect class="packet-bg" x="-55" y="-18" width="110" height="36" rx="8" />
        <text id="packet-text" class="packet-text" x="0" y="1">DATA</text>
    </g>
</svg>
